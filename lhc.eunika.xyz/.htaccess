# BEGIN Custom Redirects
<IfModule mod_rewrite.c>

RewriteEngine On

# Exclude wp-admin/wp-ajax.php and wp-json from the redirect rule
RewriteCond %{REQUEST_URI} !^/wp-admin
RewriteCond %{REQUEST_URI} !^/wp-json

# Redirect to preserve only the first category segment
# RewriteCond %{REQUEST_URI} ^/category/(.+)/(.+)/(.+)$
# RewriteRule ^ /category/%1/ [R=301,L]

# Apply the redirect rule to append a trailing slash if the URL does not end in a file extension
RewriteCond %{REQUEST_URI} /+[^\.]+$
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301,L]

</IfModule>
# END Custom Redirects

# BEGIN WordPress
# The directives (lines) between "BEGIN WordPress" and "END WordPress" are
# dynamically generated, and should only be modified via WordPress filters.
# Any changes to the directives between these markers will be overwritten.
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress
