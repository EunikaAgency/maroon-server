<?php


namespace OTP\Helper\Gateway;

if (defined("\x41\x42\123\x50\101\x54\x48")) {
    goto TJ;
}
die;
TJ:
use OTP\Objects\IGatewayType;
use OTP\Traits\Instance;
use OTP\Helper\GatewayType;
use OTP\Helper\MocURLOTP;
class MoPOSTRequest implements IGatewayType
{
    use Instance;
    private $gateway_url;
    public $_gatewayName;
    public function __construct()
    {
        $this->_gatewayName = "\120\x4f\123\x54\x20\x52\145\161\x75\x65\x73\164";
    }
    public function sendOTPRequest($yS, $Bh)
    {
        $GL = get_mo_option("\143\x75\x73\164\x6f\155\x5f\163\155\163\x5f\147\x61\164\145\167\141\x79");
        $yS = str_replace("\x20", "\x2b", $yS);
        $Bh = apply_filters("\155\157\137\x66\x69\x6c\164\145\162\137\160\150\157\x6e\x65\137\142\145\x66\x6f\x72\145\x5f\141\160\x69\x5f\143\141\x6c\x6c", $Bh);
        $GL = apply_filters("\143\165\x73\x74\x6f\x6d\x69\x7a\145\x5f\157\164\x70\x5f\x75\162\154\x5f\142\x65\146\x6f\162\145\x5f\141\160\151\137\143\x61\154\x6c", $GL, $yS, apply_filters("\x6d\x6f\x5f\146\x69\x6c\164\145\x72\x5f\x70\150\157\156\x65\137\142\145\x66\157\162\145\137\x61\x70\x69\137\x63\x61\x6c\154", $Bh));
        $fX = maybe_unserialize(get_mo_option("\x63\x75\163\x74\x6f\155\x5f\x67\x61\x74\145\x77\141\x79\x5f\x70\x6f\x73\x74\137\142\157\144\171"));
        $mj = array();
        foreach ($fX as $Vc => $Jk) {
            $OI[$Jk["\x61\164\x74\x72\x4b\145\x79"]] = $Jk["\141\164\x74\x72\x56\141\x6c"];
            $mj = array_merge($mj, $OI);
            g2:
        }
        GE:
        $VX = json_encode($mj);
        $VX = str_replace("\43\x23\155\x65\x73\x73\141\147\145\43\x23", $yS, $VX);
        $VX = str_replace("\x23\x23\160\x68\157\x6e\145\43\x23", $Bh, $VX);
        $NG = MocURLOTP::callAPI($GL, $VX);
        return $NG;
    }
    public function handleGatewayResponse($NG)
    {
        return apply_filters("\155\157\x5f\x63\165\163\x74\157\x6d\137\147\141\164\145\167\x61\171\x5f\162\x65\163\160\157\x6e\x73\x65", $NG);
    }
    public function getGatewayConfigView($eh, $aK)
    {
        $aa = maybe_unserialize(get_mo_option("\x63\x75\163\164\157\x6d\137\147\x61\164\145\x77\x61\x79\137\x70\157\x73\x74\x5f\142\157\144\171"));
        $Ns = count($aa) ? count($aa) : 2;
        $sl = "\x3c\142\x3e" . mo_("\x53\x4d\x53\x20\107\x61\x74\x65\x77\x61\171\40\x55\122\x4c") . "\72\x3c\x2f\x62\76\xd\xa\x20\40\40\40\40\40\x20\40\x20\40\x20\x20\40\40\40\40\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\40\x3c\x64\x69\166\40\x3e\xd\12\40\40\x20\x20\40\40\x20\40\x20\x20\x20\x20\40\40\x20\40\40\40\x20\40\40\40\40\40\x20\40\40\x20\40\40\40\40\74\x69\x6e\160\165\164\x20\x74\x79\x70\x65\x3d\x22\x75\x72\x6c\x22\x20" . $eh . "\40\xd\xa\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\40\x20\40\151\x64\x3d\42\143\165\163\x74\x6f\155\137\163\x6d\163\x5f\x67\141\x74\x65\167\141\171\x22\x20\15\xa\40\40\40\x20\x20\40\40\x20\40\x20\40\x20\x20\40\40\x20\x20\x20\40\x20\x20\40\40\x20\40\x20\40\x20\40\40\x20\40\x20\x20\40\x20\143\154\x61\163\163\75\x22\x6d\157\137\x72\145\147\151\x73\164\x72\x61\x74\x69\x6f\156\x5f\x74\141\x62\154\145\x5f\164\145\x78\x74\142\157\170\x22\40\15\12\40\x20\x20\40\40\x20\40\40\x20\40\x20\x20\40\40\40\40\x20\x20\40\40\x20\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\40\x73\164\x79\154\145\x3d\x22\142\157\x72\144\145\x72\x3a\x31\x70\170\40\x73\x6f\x6c\151\144\40\x23\144\x64\144\x22\x20\xd\12\40\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\x20\40\x20\x20\40\40\40\40\x20\40\x20\x20\x20\40\40\40\156\141\x6d\145\75\x22\155\x6f\137\143\165\163\x74\157\155\x65\x72\x5f\x76\141\x6c\x69\144\141\x74\x69\x6f\x6e\x5f\x63\x75\163\x74\157\x6d\137\x73\x6d\x73\x5f\147\x61\164\145\x77\141\x79\42\x20\xd\12\x20\40\40\40\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\40\40\x20\x20\40\x70\x6c\x61\x63\x65\150\157\x6c\x64\145\162\x3d\42" . mo_("\x45\156\164\x65\162\40\107\x61\164\x65\167\x61\x79\40\x55\x52\114") . "\x22\x20\166\141\x6c\x75\145\x20\75\40\x22" . $aK . "\x22\40\57\76\xd\xa\x20\x20\x20\x20\40\40\40\40\40\x20\40\40\x20\40\40\x20\x20\40\x20\40\x20\40\x20\40\40\x20\x20\40\40\40\40\x20\x3c\142\x72\76\15\xa\40\x20\40\40\x20\40\x20\40\x20\40\40\x20\40\x20\40\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\40\x3c\x2f\x64\151\x76\76\15\12\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\x20\x3c\142\162\76\xd\xa\40\40\x20\x20\x20\40\40\40\40\x20\x20\x20\x20\40\40\40\40\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\x3c\144\151\166\x3e\15\12\x20\x20\40\x20\x20\x20\40\40\40\40\x20\x20\40\x20\40\40\40\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\40\74\142\x3e" . mo_("\x47\x61\x74\145\167\141\171\40\160\x61\x72\141\155\145\x74\x65\x72\x73") . "\x3c\x2f\142\76\15\12\40\40\x20\40\40\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\74\144\x69\166\40\143\154\141\x73\163\x3d\x22\x6d\157\x2d\x67\141\164\145\x77\x61\x79\x2d\x62\x6f\144\171\42\x3e";
        $sl .= "\x3c\x64\151\x76\40\x63\x6c\141\x73\163\75\x22\x6d\157\55\x67\x61\x74\x65\x77\141\171\55\164\145\170\164\x2d\x70\x61\x69\x72\42\76\15\xa\x20\40\40\40\40\x20\40\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\40\x20\40\x20\40\40\x20\x20\74\151\156\x70\165\x74\x20\x74\x79\x70\x65\75\x22\x74\x65\170\x74\x22\x20\xd\xa\x20\40\x20\x20\x20\40\x20\40\40\40\x20\40\x20\x20\x20\40\x20\40\40\40\x20\40\40\x20\x20\40\x20\40\x20\x20\40\x20\143\154\x61\x73\x73\x3d\x22\x6d\157\55\x67\141\x74\145\x77\141\171\x2d\160\x61\x72\x61\x6d\42\40\15\xa\40\40\40\x20\x20\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\40\x20\40\40\40\x20\x20\40\40\40\x20\40\40\x6e\x61\155\145\x3d\x22\x6d\x6f\x5f\x70\157\163\x74\137\x70\x61\162\141\155\133\x5d\42\40\xd\xa\x20\40\x20\40\40\x20\40\40\40\x20\40\x20\x20\x20\40\x20\40\40\x20\x20\x20\x20\x20\x20\40\40\x20\x20\x20\40\40\x20\160\154\x61\x63\x65\150\157\x6c\x64\x65\x72\x3d\42\x50\150\x6f\x6e\145\40\x50\x61\x72\141\x6d\145\164\145\162\x22\x20\162\x65\x71\x75\x69\162\145\x64\40\15\xa\x20\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\40\x20\40\x20\40\x20\40\40\x20\x20\x20\x20\x20\x20\40\166\141\154\x75\145\x3d\x22" . $aa[0]["\141\x74\164\x72\x4b\145\x79"] . "\x22\x2f\76\40\xd\xa\40\x20\x20\40\40\40\40\40\x20\x20\x20\x20\x20\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\40\40\x20\40\74\x69\x6e\x70\x75\x74\40\164\171\x70\x65\x3d\42\164\145\x78\164\x22\40\xd\xa\x20\40\40\40\x20\40\x20\40\x20\x20\40\x20\x20\40\40\x20\40\40\40\x20\x20\x20\x20\40\40\x20\x20\x20\x20\x20\40\40\x63\154\141\163\163\x3d\x22\155\157\x2d\147\141\x74\145\x77\141\x79\x2d\x70\x61\162\141\x6d\x22\40\15\xa\40\x20\x20\40\40\40\x20\40\40\40\40\40\40\x20\40\x20\x20\x20\40\40\40\40\40\40\40\40\40\40\x20\x20\40\40\156\x61\x6d\x65\75\42\x6d\x6f\x5f\x70\157\163\x74\137\166\141\154\x75\x65\133\135\x22\x20\15\12\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\40\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\x20\x20\40\x20\166\x61\x6c\x75\x65\75\x22\x23\x23\x70\150\157\x6e\x65\43\x23\x22\40\x72\x65\x61\144\x6f\156\x6c\171\x2f\76\xd\12\x20\x20\40\x20\40\x20\x20\x20\40\40\40\x20\x20\40\x20\40\x20\x20\40\x20\40\40\x20\40\74\x2f\144\x69\166\76";
        $sl .= "\x3c\144\x69\x76\x20\x63\x6c\141\x73\163\75\x22\x6d\157\55\147\x61\x74\x65\167\x61\171\x2d\164\145\x78\164\x2d\x70\141\x69\x72\42\76\15\xa\40\x20\x20\x20\x20\x20\x20\40\40\x20\40\40\x20\40\40\x20\40\x20\x20\40\x20\40\x20\x20\x20\40\40\40\x3c\x69\156\160\165\164\40\164\x79\160\x65\75\x22\164\145\x78\164\42\40\15\12\40\40\40\x20\40\40\40\x20\x20\x20\40\40\40\40\x20\40\40\40\40\x20\40\x20\40\40\40\x20\40\40\x20\40\x20\x20\143\x6c\x61\x73\x73\75\42\x6d\157\55\x67\x61\x74\145\x77\141\x79\55\x70\x61\162\x61\155\x22\x20\xd\xa\x20\40\40\40\x20\x20\x20\x20\40\40\40\40\40\x20\x20\40\x20\40\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\40\40\156\x61\x6d\145\75\42\155\x6f\137\x70\157\x73\164\x5f\160\x61\x72\x61\155\x5b\x5d\x22\40\15\xa\x20\40\x20\40\x20\40\40\40\x20\40\x20\x20\40\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\40\40\40\40\40\40\40\40\x70\x6c\141\x63\x65\150\x6f\x6c\x64\x65\162\x3d\x22\115\145\x73\x73\x61\x67\x65\40\120\141\162\x61\x6d\x65\164\145\x72\42\40\x72\x65\161\x75\151\x72\145\144\40\xd\12\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\40\40\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\x20\x20\40\x76\x61\x6c\x75\145\75\x22" . $aa[1]["\141\164\x74\162\113\x65\x79"] . "\42\x2f\x3e\40\15\12\x20\x20\40\40\x20\40\x20\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\x20\40\x20\74\151\156\160\165\164\40\x74\171\x70\x65\75\x22\x74\x65\x78\x74\42\40\15\xa\40\x20\x20\x20\40\x20\x20\x20\40\40\40\x20\x20\40\40\40\40\40\40\x20\40\40\x20\x20\40\40\40\40\40\x20\40\40\x63\154\141\163\163\75\x22\x6d\157\x2d\x67\x61\x74\145\167\x61\x79\x2d\x70\141\162\x61\155\42\40\xd\12\40\x20\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\x20\40\40\x20\40\40\x20\40\40\x20\40\40\x20\40\40\40\x20\x20\x20\x6e\141\x6d\145\75\x22\155\x6f\137\x70\x6f\163\x74\x5f\x76\141\154\165\x65\x5b\135\x22\x20\15\xa\40\x20\x20\40\x20\40\40\40\40\x20\40\x20\x20\40\40\40\40\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\40\40\x20\166\141\154\165\145\75\42\x23\x23\x6d\145\x73\163\141\x67\145\43\x23\42\40\162\x65\x61\144\x6f\x6e\154\171\x2f\x3e\15\xa\x20\x20\40\40\x20\x20\x20\40\40\40\40\40\x20\x20\40\40\40\40\x20\x20\40\x20\x20\40\x20\40\40\40\x3c\x69\x6e\160\165\164\x20\x63\154\141\163\163\x3d\x22\142\x75\x74\164\x6f\156\40\x62\x75\x74\x74\x6f\156\x2d\x70\162\151\x6d\141\162\x79\40\x6d\x6f\x2d\x61\x64\144\55\x62\165\164\164\157\x6e\42\xd\xa\40\40\40\x20\x20\x20\40\40\40\x20\x20\x20\40\40\40\x20\x20\x20\40\40\40\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\40\x20\x20\40\164\171\x70\x65\x3d\x22\x62\x75\x74\x74\157\x6e\x22\40\15\12\x20\40\40\x20\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\40\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\x69\144\75\x22\155\157\x41\144\144\107\141\164\145\167\x61\x79\x50\141\x72\141\155\x22\x20\15\12\x20\40\x20\x20\40\x20\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\x20\40\40\40\40\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\40\x20\156\141\x6d\145\75\x22\155\x6f\x41\144\x64\107\141\164\145\167\141\171\120\141\x72\141\155\42\40\15\12\40\x20\40\40\40\x20\40\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\40\40\x20\40\x20\40\x20\x20\x20\x20\x20\x20\x76\x61\154\x75\x65\x3d\42\53\42\57\76\xd\12\40\40\40\x20\x20\x20\x20\x20\40\40\x20\40\x20\40\x20\40\40\40\x20\40\x20\40\40\x20\74\x2f\144\151\x76\x3e";
        $Hs = 2;
        JX:
        if (!($Hs < $Ns)) {
            goto wn;
        }
        $sl .= "\74\x64\x69\x76\40\x63\x6c\x61\163\x73\x3d\x22\155\157\x2d\147\141\x74\x65\167\141\171\55\x74\145\170\x74\55\160\141\151\162\42\76\15\12\x20\x20\40\40\40\40\x20\40\40\40\40\x20\40\40\40\40\x20\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\40\x20\x20\40\74\151\156\x70\x75\x74\x20\x63\154\141\x73\x73\x3d\42\155\x6f\x2d\x67\141\164\145\x77\x61\x79\55\x70\x61\162\x61\155\x22\x20\15\xa\x20\40\40\x20\40\x20\x20\40\x20\40\40\x20\40\40\x20\x20\40\40\40\x20\40\40\x20\40\x20\x20\x20\40\40\40\x20\x20\x20\40\40\x20\x74\171\160\145\75\x22\164\x65\170\164\42\40\15\12\40\x20\x20\40\x20\x20\x20\40\x20\40\40\40\40\40\40\x20\x20\40\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\156\x61\155\145\x3d\x22\x6d\157\x5f\160\157\163\x74\137\160\x61\162\x61\155\x5b\135\x22\40\15\xa\40\x20\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\x20\40\40\x20\40\40\40\x20\x20\40\x20\x20\40\40\40\x20\x20\160\x6c\x61\x63\145\150\157\x6c\x64\x65\x72\75\42\120\141\162\141\x6d\145\164\x65\162\x20\116\141\x6d\x65\42\40\166\x61\x6c\x75\x65\x3d\42" . $aa[$Hs]["\141\164\x74\x72\x4b\145\171"] . "\x22\57\76\15\12\x20\x20\40\x20\x20\40\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\40\40\40\40\40\40\40\40\40\x20\x20\40\40\74\151\156\x70\x75\164\x20\143\154\141\x73\x73\x3d\42\155\157\55\x67\x61\164\145\167\141\x79\x2d\x70\141\x72\141\155\x22\40\xd\12\x20\40\x20\40\x20\x20\40\40\40\x20\x20\40\x20\40\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\40\40\40\x20\x20\40\40\164\x79\160\x65\75\42\164\145\x78\164\x22\x20\15\12\x20\40\x20\40\x20\40\40\40\x20\x20\x20\40\x20\40\x20\40\x20\40\40\40\x20\x20\40\40\40\40\x20\x20\x20\40\40\x20\40\x20\x20\40\156\x61\155\145\x3d\x22\x6d\x6f\x5f\x70\157\x73\x74\137\x76\x61\x6c\x75\145\x5b\x5d\x22\40\15\12\x20\40\40\x20\x20\x20\x20\x20\40\40\x20\40\40\40\40\40\40\40\x20\x20\40\x20\40\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\160\x6c\x61\143\145\x68\x6f\154\x64\145\x72\x3d\x22\x76\x61\x6c\165\145\42\40\15\xa\40\40\x20\40\40\x20\40\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\x20\x20\40\40\40\40\40\x20\40\x76\141\x6c\165\145\75\42" . $aa[$Hs]["\x61\x74\x74\162\x56\141\154"] . "\42\57\x3e\xd\xa\x20\40\40\40\x20\40\x20\x20\40\40\40\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\x20\x20\40\x20\x20\40\40\x20\74\x69\156\160\x75\164\40\x63\154\x61\x73\163\x3d\42\142\165\x74\x74\157\156\40\142\x75\164\164\157\x6e\x2d\x70\x72\x69\155\x61\162\x79\x20\x6d\x6f\55\x72\145\x6d\x6f\x76\145\x2d\x62\x75\164\164\157\156\42\xd\xa\x20\x20\x20\x20\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\40\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\40\40\x20\40\40\40\x20\x20\164\x79\160\x65\75\x22\142\x75\x74\x74\x6f\156\42\x20\xd\12\x20\x20\40\40\x20\x20\x20\40\x20\40\x20\40\x20\x20\x20\x20\40\40\40\x20\40\40\40\40\x20\40\x20\x20\x20\x20\40\40\40\40\x20\40\x69\144\x3d\x22\x6d\x6f\122\145\x6d\x6f\x76\145\107\141\164\145\x77\x61\x79\x50\141\x72\x61\155\133\135\x22\40\15\xa\x20\40\40\40\40\x20\40\40\x20\x20\40\40\40\40\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\40\x20\40\x20\40\x20\x20\40\40\x20\156\x61\155\145\x3d\x22\x6d\157\x52\145\x6d\x6f\x76\145\107\141\164\145\167\x61\171\120\141\162\x61\x6d\x22\40\xd\12\40\40\40\40\40\x20\40\40\x20\x20\x20\40\40\40\40\40\x20\40\40\x20\40\x20\40\40\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\40\x76\x61\x6c\x75\145\x3d\42\55\x22\x2f\76\xd\12\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\40\40\x20\x20\x20\40\40\40\40\40\40\x20\40\40\x3c\57\144\151\166\76";
        Ub:
        $Hs++;
        goto JX;
        wn:
        $sl .= "\74\x2f\144\x69\166\x3e\74\142\x72\x3e\74\57\x64\151\166\x3e";
        return $sl;
    }
    public function saveGatewayDetails($LJ)
    {
        $aa = array();
        $aa = $this->parsePostParams($LJ["\x6d\157\x5f\x70\157\x73\164\137\x70\x61\x72\x61\x6d"], $LJ["\x6d\x6f\x5f\x70\x6f\x73\164\x5f\x76\141\x6c\x75\145"]);
        update_mo_option("\143\165\163\x74\x6f\x6d\137\x73\155\x73\137\147\141\x74\x65\x77\x61\171", $LJ["\x6d\157\137\x63\x75\x73\x74\x6f\x6d\x65\x72\137\x76\x61\154\x69\x64\x61\x74\x69\x6f\156\x5f\143\165\163\x74\x6f\155\137\x73\x6d\163\137\x67\x61\164\145\167\x61\171"]);
        update_mo_option("\x63\x75\163\x74\157\155\x5f\x67\x61\164\145\x77\141\171\137\x70\x6f\x73\164\137\x62\x6f\144\171", maybe_serialize($aa));
    }
    private function parsePostParams($PA, $Jk)
    {
        $Ay = array();
        foreach ($PA as $Vc => $o6) {
            array_push($Ay, array("\141\x74\164\162\113\x65\x79" => $o6, "\141\164\x74\162\126\x61\x6c" => $Jk[$Vc]));
            yA:
        }
        Zm:
        return $Ay;
    }
}
