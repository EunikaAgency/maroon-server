var timer,timeOut_Val=300,timeOut=timeOut_Val,preview_shortcode=jQuery(".wpnw-customizer").attr("data-shortcode"),dep_wrap=".wpnw-customizer-control",dependency=jQuery(dep_wrap+" .wpnw-cust-dependency").attr("data-dependency");function wpnw_generate_shortcode_preview(){var o="",e=jQuery(".wpnw-customizer"),n=jQuery(".wpnw-customizer-control"),t=preview_shortcode;clearTimeout(timer),timer=setTimeout(function(){e.find(".wpnw-customizer-loader").fadeIn(),o+="["+t,n.find('input[type="text"], input[type="checkbox"]:checked, input[type="radio"], input[type="number"], textarea, select').each(function(e,n){var t,r,w,p;jQuery(this).hasClass("wpnw-cust-hidden-field")||(t=jQuery(this).val(),r=jQuery(this).attr("name"),w=jQuery(this).attr("data-default"),p=jQuery(this).attr("data-empty"),void 0===t||""==t&&!p||t==w||(o+=" "+r+'="'+t+'"'))}),o+="]",e.find(".wpnw-customizer-shrt").val(o),jQuery("#wpnw-customizer-shrt-form").trigger("submit"),e.find(".wpnw-customizer-preview-frame").on("load",function(){e.find(".wpnw-customizer-loader").fadeOut()})},timeOut)}function wpnw_check_ref_dependency(t){var r;ref_dep=t in dependency,ref_dep&&(r=jQuery(dep_wrap+" .wpnw-"+t).val(),jQuery.each(dependency[t].show,function(e,n){jQuery(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").hide(),jQuery(dep_wrap+" .wpnw-"+e).addClass("wpnw-cust-hidden-field"),-1!==jQuery.inArray(r,n)&&jQuery(dep_wrap+" .wpnw-"+t).is(":visible")&&(jQuery(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").show(),jQuery(dep_wrap+" .wpnw-"+e).removeClass("wpnw-cust-hidden-field")),wpnw_check_ref_dependency(e)}))}dependency=void 0!==dependency?JSON.parse(dependency):"",function(p){"use strict";p(document).on("click",".wpnw-cust-dwp",function(){p("body").toggleClass("wpnw-cust-full-preview"),p(this).toggleClass("wpnw-cust-dwp-active")}),p("#wpnw-cust-accordion").accordion({collapsible:!0,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-down-alt2",activeHeader:"dashicons dashicons-arrow-up-alt2"}}),0<p(".wpnw-cust-color-box").length&&p(".wpnw-cust-color-box").wpColorPicker({change:function(e,n){wpnw_generate_shortcode_preview()},clear:function(){wpnw_generate_shortcode_preview()}}),p(document).on("change",'.wpnw-customizer-control select, .wpnw-customizer-control input[type="number"], .wpnw-customizer-control .wpnw-color-box',function(){p(this).attr("data-timeout");wpnw_generate_shortcode_preview()}),p(document).on("keyup",'.wpnw-customizer-control input[type="text"], .wpnw-customizer-control input[type="number"]',function(){p(this).attr("data-timeout");wpnw_generate_shortcode_preview()}),p(document).on("change",".wpnw-cust-shrt-switcher",function(){var e=p(this).find(":selected").attr("data-url");void 0!==e&&""!=e&&(window.location=e)}),jQuery("document").on("submit","#wpnw-customizer-shrt-form",function(e){var n=p(this).attr("target");if(void 0===n||""==n)return!1}),p(document).on("click",".wpnw-cust-shrt-generate",function(){var e=p(".wpnw-customizer-shrt").val(),n=(e=e.trim()).substr(0,1),t=e.substr(-1),r=!1;if(""==e)return!1;"["==n&&"]"==t&&(n=(e=(e=e.slice(1,-1)).trim()).substr(0,1),t=e.substr(-1)),"["!=n&&(e="["+e),"]"!=t&&(e+="]"),p(".wpnw-customizer-shrt").val(e);e=(e=e.slice(1,-1)).trim(),e=wp.shortcode.attrs(e);if(e.numeric[0]&&e.numeric[0]!==preview_shortcode)return alert(Wpnw_Shrt_Mapper.shortocde_err),!1;e.named&&p.each(e.named,function(e,n){e&&(p(".wpnw-customizer-control .wpnw-"+e).val(n).trigger("change").trigger("keyup"),r=!0)}),1!=r&&wpnw_generate_shortcode_preview()}),dependency?p.each(dependency,function(e,n){e&&(setTimeout(function(){p(dep_wrap+" .wpnw-"+e).trigger("change")},10),p(document).on("change keyup",dep_wrap+" .wpnw-"+e,function(){var w=p(this).val();n.show&&p.each(n.show,function(e,n){p(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").hide(),p(dep_wrap+" .wpnw-"+e).addClass("wpnw-cust-hidden-field"),-1!==p.inArray(w,n)&&(p(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").show(),p(dep_wrap+" .wpnw-"+e).removeClass("wpnw-cust-hidden-field")),wpnw_check_ref_dependency(e)}),n.hide&&p.each(n.hide,function(t,e){var r;p(dep_wrap+" .wpnw-"+t).closest(".wpnw-customizer-row").show(),p(dep_wrap+" .wpnw-"+t).removeClass("wpnw-cust-hidden-field"),-1!==p.inArray(w,e)&&(p(dep_wrap+" .wpnw-"+t).closest(".wpnw-customizer-row").hide(),p(dep_wrap+" .wpnw-"+t).addClass("wpnw-cust-hidden-field")),ref_dep=t in dependency,ref_dep&&(r=p(dep_wrap+" .wpnw-"+t).val(),p.each(dependency[t].hide,function(e,n){p(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").hide(),p(dep_wrap+" .wpnw-"+e).addClass("wpnw-cust-hidden-field"),-1!=p.inArray(r,n)||p(dep_wrap+" .wpnw-"+t).hasClass("wpnw-cust-hidden-field")||(p(dep_wrap+" .wpnw-"+e).closest(".wpnw-customizer-row").show(),p(dep_wrap+" .wpnw-"+e).removeClass("wpnw-cust-hidden-field"))}))})}))}):wpnw_generate_shortcode_preview()}(jQuery);